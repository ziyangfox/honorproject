{"remainingRequest":"D:\\project\\ONLYzaixianshangcheng\\client\\ONLYzaixianshangcheng_client\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\ONLYzaixianshangcheng\\client\\ONLYzaixianshangcheng_client\\src\\utils\\utils.js","dependencies":[{"path":"D:\\project\\ONLYzaixianshangcheng\\client\\ONLYzaixianshangcheng_client\\src\\utils\\utils.js","mtime":1614239924000},{"path":"D:\\project\\ONLYzaixianshangcheng\\client\\ONLYzaixianshangcheng_client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\ONLYzaixianshangcheng\\client\\ONLYzaixianshangcheng_client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0IHN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlJzsKaW1wb3J0IG1lbnUgZnJvbSAnLi9tZW51JzsKLyoqDQogKiDmmK/lkKbmnInmnYPpmZANCiAqIEBwYXJhbSB7Kn0ga2V5DQogKi8KCmV4cG9ydCBmdW5jdGlvbiBpc0F1dGgodGFibGVOYW1lLCBrZXkpIHsKICB2YXIgcm9sZSA9IHN0b3JhZ2UuZ2V0KCJyb2xlIik7CgogIGlmICghcm9sZSkgewogICAgcm9sZSA9ICfnrqHnkIblkZgnOwogIH0KCiAgdmFyIG1lbnVzID0gbWVudS5saXN0KCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudXMubGVuZ3RoOyBpKyspIHsKICAgIGlmIChtZW51c1tpXS5yb2xlTmFtZSA9PSByb2xlKSB7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWVudXNbaV0uYmFja01lbnUubGVuZ3RoOyBqKyspIHsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG1lbnVzW2ldLmJhY2tNZW51W2pdLmNoaWxkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBpZiAodGFibGVOYW1lID09IG1lbnVzW2ldLmJhY2tNZW51W2pdLmNoaWxkW2tdLnRhYmxlTmFtZSkgewogICAgICAgICAgICB2YXIgYnV0dG9ucyA9IG1lbnVzW2ldLmJhY2tNZW51W2pdLmNoaWxkW2tdLmJ1dHRvbnMuam9pbignLCcpOwogICAgICAgICAgICByZXR1cm4gYnV0dG9ucy5pbmRleE9mKGtleSkgIT09IC0xIHx8IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gLy8gZm9yKGxldCBpPTA7aTxtZW51cy5sZW5ndGg7aSsrKXsKICAvLyAgICAgaWYobWVudXNbaV0ucm9sZU5hbWU9PXJvbGUpewogIC8vICAgICAgICAgZm9yKGxldCBqPTA7ajxtZW51c1tpXS5iYWNrTWVudS5sZW5ndGg7aisrKXsKICAvLyAgICAgICAgICAgICBpZihtZW51c1tpXS5iYWNrTWVudVtqXS50YWJsZU5hbWU9PXRhYmxlTmFtZSl7CiAgLy8gICAgICAgICAgICAgICAgIGxldCBidXR0b25zID0gbWVudXNbaV0uYmFja01lbnVbal0uY2hpbGRbMF0uYnV0dG9ucy5qb2luKCcsJyk7CiAgLy8gICAgICAgICAgICAgICAgIHJldHVybiBidXR0b25zLmluZGV4T2Yoa2V5KSAhPT0gLTEgfHwgZmFsc2UKICAvLyAgICAgICAgICAgICB9CiAgLy8gICAgICAgICB9CiAgLy8gICAgIH0KICAvLyB9CgoKICByZXR1cm4gZmFsc2U7Cn0="},{"version":3,"sources":["D:/project/ONLYzaixianshangcheng/client/ONLYzaixianshangcheng_client/src/utils/utils.js"],"names":["storage","menu","isAuth","tableName","key","role","get","menus","list","i","length","roleName","j","backMenu","k","child","buttons","join","indexOf"],"mappings":";;AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA;;;;;AAIA,OAAO,SAASC,MAAT,CAAgBC,SAAhB,EAA0BC,GAA1B,EAA+B;AAClC,MAAIC,IAAI,GAAGL,OAAO,CAACM,GAAR,CAAY,MAAZ,CAAX;;AACA,MAAG,CAACD,IAAJ,EAAS;AACLA,IAAAA,IAAI,GAAG,KAAP;AACH;;AACD,MAAIE,KAAK,GAAGN,IAAI,CAACO,IAAL,EAAZ;;AACA,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,KAAK,CAACG,MAApB,EAA2BD,CAAC,EAA5B,EAA+B;AAC3B,QAAGF,KAAK,CAACE,CAAD,CAAL,CAASE,QAAT,IAAmBN,IAAtB,EAA2B;AACvB,WAAI,IAAIO,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,KAAK,CAACE,CAAD,CAAL,CAASI,QAAT,CAAkBH,MAAhC,EAAuCE,CAAC,EAAxC,EAA2C;AACvC,aAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACP,KAAK,CAACE,CAAD,CAAL,CAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BL,MAAzC,EAAgDI,CAAC,EAAjD,EAAoD;AAChD,cAAGX,SAAS,IAAEI,KAAK,CAACE,CAAD,CAAL,CAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BD,CAA3B,EAA8BX,SAA5C,EAAsD;AAClD,gBAAIa,OAAO,GAAGT,KAAK,CAACE,CAAD,CAAL,CAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BD,CAA3B,EAA8BE,OAA9B,CAAsCC,IAAtC,CAA2C,GAA3C,CAAd;AACA,mBAAOD,OAAO,CAACE,OAAR,CAAgBd,GAAhB,MAAyB,CAAC,CAA1B,IAA+B,KAAtC;AACH;AACJ;AACJ;AACJ;AACJ,GAjBiC,CAkBlC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAO,KAAP;AACH","sourcesContent":["import storage from './storage';\r\nimport menu from './menu';\r\n/**\r\n * 是否有权限\r\n * @param {*} key\r\n */\r\nexport function isAuth(tableName,key) {\r\n    let role = storage.get(\"role\");\r\n    if(!role){\r\n        role = '管理员';\r\n    }\r\n    let menus = menu.list();\r\n    for(let i=0;i<menus.length;i++){\r\n        if(menus[i].roleName==role){\r\n            for(let j=0;j<menus[i].backMenu.length;j++){\r\n                for(let k=0;k<menus[i].backMenu[j].child.length;k++){\r\n                    if(tableName==menus[i].backMenu[j].child[k].tableName){\r\n                        let buttons = menus[i].backMenu[j].child[k].buttons.join(',');\r\n                        return buttons.indexOf(key) !== -1 || false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // for(let i=0;i<menus.length;i++){\r\n    //     if(menus[i].roleName==role){\r\n    //         for(let j=0;j<menus[i].backMenu.length;j++){\r\n    //             if(menus[i].backMenu[j].tableName==tableName){\r\n    //                 let buttons = menus[i].backMenu[j].child[0].buttons.join(',');\r\n    //                 return buttons.indexOf(key) !== -1 || false\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // }\r\n    return false;\r\n}\r\n\r\n"]}]}